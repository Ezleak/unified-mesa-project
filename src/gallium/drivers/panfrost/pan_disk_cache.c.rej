diff a/src/gallium/drivers/panfrost/pan_disk_cache.c b/src/gallium/drivers/panfrost/pan_disk_cache.c	(rejected hunks)
@@ -141,6 +143,8 @@ panfrost_disk_cache_retrieve(struct disk_cache *cache,
         blob_copy_bytes(&blob, ptr, binary_size);
         blob_copy_bytes(&blob, &binary->info, sizeof(binary->info));
 
+        free(buffer);
+
         return true;
 #else
         return false;
@@ -156,11 +160,7 @@ panfrost_disk_cache_init(struct panfrost_screen *screen)
 #ifdef ENABLE_SHADER_CACHE
         const char *renderer = screen->base.get_name(&screen->base);
 
-        const struct build_id_note *note =
-                build_id_find_nhdr_for_addr(panfrost_disk_cache_init);
-        assert(note && build_id_length(note) == 20); /* sha1 */
-
-        const uint8_t *id_sha1 = build_id_data(note);
+        const uint8_t *id_sha1 = "1";
         assert(id_sha1);
 
         char timestamp[41];
