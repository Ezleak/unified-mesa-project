diff a/src/panfrost/lib/pan_texture.h b/src/panfrost/lib/pan_texture.h	(rejected hunks)
@@ -44,9 +44,15 @@
 extern "C" {
 #endif
 
-#define PAN_MODIFIER_COUNT 6
+#define PAN_MODIFIER_COUNT 7
 extern uint64_t pan_best_modifiers[PAN_MODIFIER_COUNT];
 
+struct pan_image_slice_crc {
+        unsigned offset;
+        unsigned stride;
+        unsigned size;
+};
+
 struct pan_image_slice_layout {
         unsigned offset;
 
@@ -80,11 +86,7 @@ struct pan_image_slice_layout {
 
         /* If checksumming is enabled following the slice, what
          * is its offset/stride? */
-        struct {
-                unsigned offset;
-                unsigned stride;
-                unsigned size;
-        } crc;
+        struct pan_image_slice_crc crc;
 
         unsigned size;
 };
@@ -141,11 +143,8 @@ struct pan_image_view {
         } buf;
 };
 
-unsigned
-panfrost_compute_checksum_size(
-        struct pan_image_slice_layout *slice,
-        unsigned width,
-        unsigned height);
+struct pan_image_slice_crc
+panfrost_compute_checksum_size(unsigned width, unsigned height);
 
 /* AFBC */
 
@@ -164,6 +163,9 @@ panfrost_afbc_can_ytr(enum pipe_format format);
 bool
 panfrost_afbc_can_tile(const struct panfrost_device *dev);
 
+bool
+panfrost_afbc_only_native(unsigned arch, enum pipe_format format);
+
 /*
  * Represents the block size of a single plane. For AFBC, this represents the
  * superblock size. For u-interleaving, this represents the tile size.
